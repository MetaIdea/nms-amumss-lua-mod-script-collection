DataTable =
{
    {
        ["PALETTE"] = "PlanetRing",
        ["NUMCOLOURS"] = "All",
        ["COLOURS"] =
        {
            {["R"]="0.239216", ["G"]="0.988235", ["B"]="0.541176", ["A"]="1"},
            {["R"]="1",        ["G"]="0.619608", ["B"]="0.2",      ["A"]="1"},
            {["R"]="1",        ["G"]="0.494118", ["B"]="0.309804", ["A"]="1"},
            {["R"]="0.721569", ["G"]="0.235294", ["B"]="1",        ["A"]="1"},
            {["R"]="1",        ["G"]="0.235294", ["B"]="0.352941", ["A"]="1"},
            {["R"]="0.807843", ["G"]="1",        ["B"]="0.929412", ["A"]="1"},
            {["R"]="0.823529", ["G"]="0.231373", ["B"]="0.858824", ["A"]="1"},
            {["R"]="0.815686", ["G"]="0.980392", ["B"]="1",        ["A"]="1"},
            {["R"]="0.486275", ["G"]="0.988235", ["B"]="0.239216", ["A"]="1"},
            {["R"]="1",        ["G"]="0.619608", ["B"]="0.2",      ["A"]="1"},
            {["R"]="1",        ["G"]="0.494118", ["B"]="0.309804", ["A"]="1"},
            {["R"]="0.721569", ["G"]="0.235294", ["B"]="1",        ["A"]="1"},
            {["R"]="1",        ["G"]="0.235294", ["B"]="0.352941", ["A"]="1"},
            {["R"]="0.12549",  ["G"]="0.992157", ["B"]="0.67451",  ["A"]="1"},
            {["R"]="0.709804", ["G"]="0.133333", ["B"]="0.741176", ["A"]="1"},
            {["R"]="0.12549",  ["G"]="0.909804", ["B"]="1",        ["A"]="1"},
            {["R"]="0.494118", ["G"]="0.890196", ["B"]="0.121569", ["A"]="1"},
            {["R"]="1",        ["G"]="0.662745", ["B"]="0.176471", ["A"]="1"},
            {["R"]="1",        ["G"]="0.529412", ["B"]="0.290196", ["A"]="1"},
            {["R"]="0.772549", ["G"]="0.211765", ["B"]="1",        ["A"]="1"},
            {["R"]="1",        ["G"]="0.25098",  ["B"]="0.317647", ["A"]="1"},
            {["R"]="0.109804", ["G"]="0.980392", ["B"]="0.709804", ["A"]="1"},
            {["R"]="0.627451", ["G"]="0.133333", ["B"]="0.623529", ["A"]="1"},
            {["R"]="0.109804", ["G"]="0.85098",  ["B"]="0.988235", ["A"]="1"},
            {["R"]="0.403922", ["G"]="0.870588", ["B"]="0.098039", ["A"]="1"},
            {["R"]="0.996078", ["G"]="0.733333", ["B"]="0.141176", ["A"]="1"},
            {["R"]="1",        ["G"]="0.580392", ["B"]="0.258824", ["A"]="1"},
            {["R"]="0.839216", ["G"]="0.176471", ["B"]="1",        ["A"]="1"},
            {["R"]="1",        ["G"]="0.270588", ["B"]="0.262745", ["A"]="1"},
            {["R"]="0.086275", ["G"]="0.964706", ["B"]="0.772549", ["A"]="1"},
            {["R"]="0.607843", ["G"]="0.105882", ["B"]="0.556863", ["A"]="1"},
            {["R"]="0.086275", ["G"]="0.756863", ["B"]="0.972549", ["A"]="1"},
            {["R"]="0.301961", ["G"]="0.847059", ["B"]="0.070588", ["A"]="1"},
            {["R"]="0.996078", ["G"]="0.807843", ["B"]="0.101961", ["A"]="1"},
            {["R"]="1",        ["G"]="0.639216", ["B"]="0.223529", ["A"]="1"},
            {["R"]="0.917647", ["G"]="0.137255", ["B"]="1",        ["A"]="1"},
            {["R"]="1",        ["G"]="0.298039", ["B"]="0.196078", ["A"]="1"},
            {["R"]="0.062745", ["G"]="0.945098", ["B"]="0.831373", ["A"]="1"},
            {["R"]="0.584314", ["G"]="0.07451",  ["B"]="0.482353", ["A"]="1"},
            {["R"]="0.062745", ["G"]="0.65098",  ["B"]="0.952941", ["A"]="1"},
            {["R"]="0.203922", ["G"]="0.823529", ["B"]="0.043137", ["A"]="1"},
            {["R"]="0.992157", ["G"]="0.886275", ["B"]="0.058824", ["A"]="1"},
            {["R"]="1",        ["G"]="0.698039", ["B"]="0.188235", ["A"]="1"},
            {["R"]="1",        ["G"]="0.098039", ["B"]="0.988235", ["A"]="1"},
            {["R"]="1",        ["G"]="0.321569", ["B"]="0.133333", ["A"]="1"},
            {["R"]="0.035294", ["G"]="0.92549",  ["B"]="0.898039", ["A"]="1"},
            {["R"]="0.560784", ["G"]="0.047059", ["B"]="0.407843", ["A"]="1"},
            {["R"]="0.035294", ["G"]="0.541176", ["B"]="0.933333", ["A"]="1"},
            {["R"]="0.113725", ["G"]="0.803922", ["B"]="0.019608", ["A"]="1"},
            {["R"]="0.988235", ["G"]="0.956863", ["B"]="0.023529", ["A"]="1"},
            {["R"]="1",        ["G"]="0.74902",  ["B"]="0.156863", ["A"]="1"},
            {["R"]="1",        ["G"]="0.066667", ["B"]="0.92549",  ["A"]="1"},
            {["R"]="1",        ["G"]="0.341176", ["B"]="0.082353", ["A"]="1"},
            {["R"]="0.015686", ["G"]="0.854902", ["B"]="0.909804", ["A"]="1"},
            {["R"]="0.541176", ["G"]="0.019608", ["B"]="0.341176", ["A"]="1"},
            {["R"]="0.015686", ["G"]="0.447059", ["B"]="0.917647", ["A"]="1"},
            {["R"]="0.054902", ["G"]="0.792157", ["B"]="0.003922", ["A"]="1"},
            {["R"]="0.988235", ["G"]="1",        ["B"]="0",        ["A"]="1"},
            {["R"]="1",        ["G"]="0.784314", ["B"]="0.137255", ["A"]="1"},
            {["R"]="1",        ["G"]="0.231373", ["B"]="0.937255", ["A"]="1"},
            {["R"]="1",        ["G"]="0.356863", ["B"]="0.043137", ["A"]="1"},
            {["R"]="0",        ["G"]="0.792157", ["B"]="0.898039", ["A"]="1"},
            {["R"]="0.529412", ["G"]="0",        ["B"]="0.298039", ["A"]="1"},
            {["R"]="0",        ["G"]="0.384314", ["B"]="0.905882", ["A"]="1"},
        }
    },
}

NMS_MOD_DEFINITION_CONTAINER =
{
["MOD_FILENAME"]    = "~BetterColorfulPlanetRings.pak",
["MOD_AUTHOR"]      = "Babscoole",
["NMS_VERSION"]     = "4.52",
["MODIFICATIONS"]   =
    {
        {
            ["MBIN_CHANGE_TABLE"] =
            {
                {
                    ["MBIN_FILE_SOURCE"] = "METADATA\SIMULATION\SOLARSYSTEM\COLOURS\BASECOLOURPALETTES.MBIN",
                    ["EXML_CHANGE_TABLE"] =
                    {
                        {
                            ["SPECIAL_KEY_WORDS"] = {"PlanetRing", "GcPaletteData.xml"},
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"NumColours", "All"}
                            }
                        },
                    }
                },
            }
        }
    }
}

function GetColours(R,G,B,A)
    return
    [[
    <Property value="Colour.xml">
          <Property name="R" value="]].. R ..[[" />
          <Property name="G" value="]].. G ..[[" />
          <Property name="B" value="]].. B ..[[" />
          <Property name="A" value="]].. A ..[[" />
        </Property>
    ]]
end

function CreateColoursProperty(PaletteColours)
    local PropertiesString = {}

    for j = 1, #PaletteColours do
        local R = PaletteColours[j]["R"]
        local G = PaletteColours[j]["G"]
        local B = PaletteColours[j]["B"]
        local A = PaletteColours[j]["A"]
        table.insert(PropertiesString,GetColours(R, G, B, A))
    end
    local PropertyColoursString =
    [[      <Property name="Colours">
    ]]..table.concat(PropertiesString)..[[
  </Property>]]

    return PropertyColoursString
end

local BaseColourPalettesTable = NMS_MOD_DEFINITION_CONTAINER["MODIFICATIONS"][1]["MBIN_CHANGE_TABLE"][1]["EXML_CHANGE_TABLE"]
for i = 1, #DataTable do
    local Palette = DataTable[i]["PALETTE"]
    local PaletteColours = DataTable[i]["COLOURS"]
    local PaletteNumColours = DataTable[i]["NUMCOLOURS"]

    BaseColourPalettesTable[#BaseColourPalettesTable +1] =
    {
        ["SPECIAL_KEY_WORDS"] = {Palette, "GcPaletteData.xml", "NumColours", PaletteNumColours},
        ["PRECEDING_KEY_WORDS"] = {"Colours"},
        ["REMOVE"] = "SECTION"
    }

    BaseColourPalettesTable[#BaseColourPalettesTable +1] =
    {
        ["SPECIAL_KEY_WORDS"] = {Palette, "GcPaletteData.xml", "NumColours", PaletteNumColours},
        ["ADD"] = CreateColoursProperty(PaletteColours)
    }
end