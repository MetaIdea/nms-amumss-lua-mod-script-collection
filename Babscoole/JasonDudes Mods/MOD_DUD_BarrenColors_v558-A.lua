DataTable =
{
    {
        ["PALETTE"] = "Leaf",
        ["NUMCOLOURS"] = "All",
        ["COLOURS"] =
        {
            {["R"]=0.462,["G"]=0.557,["B"]=0.163,["A"]=1},
            {["R"]=0.462,["G"]=0.557,["B"]=0.163,["A"]=1},
            {["R"]=0.223,["G"]=0.453,["B"]=0.104,["A"]=1},
            {["R"]=0.223,["G"]=0.453,["B"]=0.104,["A"]=1},
            {["R"]=0.777,["G"]=0.736,["B"]=0.107,["A"]=1},
            {["R"]=0.777,["G"]=0.736,["B"]=0.107,["A"]=1},
            {["R"]=0.696,["G"]=0.516,["B"]=0.135,["A"]=1},
            {["R"]=0.696,["G"]=0.516,["B"]=0.135,["A"]=1},
            {["R"]=0.557,["G"]=0.542,["B"]=0.184,["A"]=1},
            {["R"]=0.557,["G"]=0.542,["B"]=0.184,["A"]=1},
            {["R"]=0.483,["G"]=0.472,["B"]=0.206,["A"]=1},
            {["R"]=0.483,["G"]=0.472,["B"]=0.206,["A"]=1},
            {["R"]=0.627,["G"]=0.245,["B"]=0.15,["A"]=1},
            {["R"]=0.627,["G"]=0.245,["B"]=0.15,["A"]=1},
            {["R"]=0.543,["G"]=0.251,["B"]=0.178,["A"]=1},
            {["R"]=0.543,["G"]=0.251,["B"]=0.178,["A"]=1},
            {["R"]=0.301,["G"]=0.557,["B"]=0.157,["A"]=1},
            {["R"]=0.301,["G"]=0.557,["B"]=0.157,["A"]=1},
            {["R"]=0.277,["G"]=0.5,["B"]=0.15,["A"]=1},
            {["R"]=0.277,["G"]=0.5,["B"]=0.15,["A"]=1},
            {["R"]=0.696,["G"]=0.381,["B"]=0.076,["A"]=1},
            {["R"]=0.696,["G"]=0.381,["B"]=0.076,["A"]=1},
            {["R"]=0.696,["G"]=0.264,["B"]=0.078,["A"]=1},
            {["R"]=0.696,["G"]=0.264,["B"]=0.078,["A"]=1},
            {["R"]=0.647,["G"]=0.632,["B"]=0.276,["A"]=1},
            {["R"]=0.647,["G"]=0.632,["B"]=0.276,["A"]=1},
            {["R"]=0.623,["G"]=0.606,["B"]=0.195,["A"]=1},
            {["R"]=0.623,["G"]=0.606,["B"]=0.195,["A"]=1},
            {["R"]=0.607,["G"]=0.464,["B"]=0.186,["A"]=1},
            {["R"]=0.607,["G"]=0.464,["B"]=0.186,["A"]=1},
            {["R"]=0.613,["G"]=0.364,["B"]=0.151,["A"]=1},
            {["R"]=0.613,["G"]=0.364,["B"]=0.151,["A"]=1},
            {["R"]=0.611,["G"]=0.168,["B"]=0.128,["A"]=1},
            {["R"]=0.611,["G"]=0.168,["B"]=0.128,["A"]=1},
            {["R"]=0.391,["G"]=0.322,["B"]=0.537,["A"]=1},
            {["R"]=0.391,["G"]=0.322,["B"]=0.537,["A"]=1},
            {["R"]=0.278,["G"]=0.581,["B"]=0.653,["A"]=1},
            {["R"]=0.278,["G"]=0.581,["B"]=0.653,["A"]=1},
            {["R"]=0.203,["G"]=0.457,["B"]=0.613,["A"]=1},
            {["R"]=0.203,["G"]=0.457,["B"]=0.613,["A"]=1},
            {["R"]=0.47,["G"]=0.407,["B"]=0.247,["A"]=1},
            {["R"]=0.47,["G"]=0.407,["B"]=0.247,["A"]=1},
            {["R"]=0.443,["G"]=0.557,["B"]=0.223,["A"]=1},
            {["R"]=0.443,["G"]=0.557,["B"]=0.223,["A"]=1},
            {["R"]=0.248,["G"]=0.484,["B"]=0.55,["A"]=1},
            {["R"]=0.248,["G"]=0.484,["B"]=0.55,["A"]=1},
            {["R"]=0.203,["G"]=0.407,["B"]=0.407,["A"]=1},
            {["R"]=0.203,["G"]=0.407,["B"]=0.407,["A"]=1},
            {["R"]=0.713,["G"]=0.272,["B"]=0.083,["A"]=1},
            {["R"]=0.713,["G"]=0.272,["B"]=0.083,["A"]=1},
            {["R"]=0.467,["G"]=0.129,["B"]=0.099,["A"]=1},
            {["R"]=0.467,["G"]=0.129,["B"]=0.099,["A"]=1},
            {["R"]=0.149,["G"]=0.563,["B"]=0.315,["A"]=1},
            {["R"]=0.149,["G"]=0.563,["B"]=0.315,["A"]=1},
            {["R"]=0.244,["G"]=0.517,["B"]=0.184,["A"]=1},
            {["R"]=0.244,["G"]=0.517,["B"]=0.184,["A"]=1},
            {["R"]=0.329,["G"]=0.487,["B"]=0.231,["A"]=1},
            {["R"]=0.329,["G"]=0.487,["B"]=0.231,["A"]=1},
            {["R"]=0.236,["G"]=0.543,["B"]=0.186,["A"]=1},
            {["R"]=0.236,["G"]=0.543,["B"]=0.186,["A"]=1},
            {["R"]=0.188,["G"]=0.48,["B"]=0.48,["A"]=1},
            {["R"]=0.188,["G"]=0.48,["B"]=0.48,["A"]=1},
            {["R"]=0.434,["G"]=0.378,["B"]=0.437,["A"]=1},
            {["R"]=0.434,["G"]=0.378,["B"]=0.437,["A"]=1},
        }
    },
    {
        ["PALETTE"] = "Wood",
        ["NUMCOLOURS"] = "_16",
        ["COLOURS"] =
        {
            {["R"]=0.85,["G"]=0.60605,["B"]=0.42874,["A"]=1},
            {["R"]=0.85,["G"]=0.60605,["B"]=0.42874,["A"]=1},
            {["R"]=0.9044,["G"]=0.87108,["B"]=0.71876,["A"]=1},
            {["R"]=0.9044,["G"]=0.87108,["B"]=0.71876,["A"]=1},
            {["R"]=1,["G"]=0.975928,["B"]=0.951857,["A"]=1},
            {["R"]=1,["G"]=0.975928,["B"]=0.951857,["A"]=1},
            {["R"]=0.7191,["G"]=0.67864,["B"]=0.63937,["A"]=1},
            {["R"]=0.7191,["G"]=0.67864,["B"]=0.63937,["A"]=1},
            {["R"]=0.85,["G"]=0.60605,["B"]=0.42874,["A"]=1},
            {["R"]=0.85,["G"]=0.60605,["B"]=0.42874,["A"]=1},
            {["R"]=0.9044,["G"]=0.87108,["B"]=0.71876,["A"]=1},
            {["R"]=0.9044,["G"]=0.87108,["B"]=0.71876,["A"]=1},
            {["R"]=1,["G"]=0.975928,["B"]=0.951857,["A"]=1},
            {["R"]=1,["G"]=0.975928,["B"]=0.951857,["A"]=1},
            {["R"]=0.7191,["G"]=0.67864,["B"]=0.63937,["A"]=1},
            {["R"]=0.7191,["G"]=0.67864,["B"]=0.63937,["A"]=1},
            {["R"]=0.4998,["G"]=0.45101,["B"]=0.39151,["A"]=1},
            {["R"]=0.4998,["G"]=0.45101,["B"]=0.39151,["A"]=1},
            {["R"]=1,["G"]=0.956539,["B"]=0.760502,["A"]=1},
            {["R"]=1,["G"]=0.956539,["B"]=0.760502,["A"]=1},
            {["R"]=0.9401,["G"]=0.93534,["B"]=0.91035,["A"]=1},
            {["R"]=0.9401,["G"]=0.93534,["B"]=0.91035,["A"]=1},
            {["R"]=0.34,["G"]=0.33881,["B"]=0.33405,["A"]=1},
            {["R"]=0.34,["G"]=0.33881,["B"]=0.33405,["A"]=1},
            {["R"]=0.4998,["G"]=0.45101,["B"]=0.39151,["A"]=1},
            {["R"]=0.4998,["G"]=0.45101,["B"]=0.39151,["A"]=1},
            {["R"]=1,["G"]=0.956539,["B"]=0.760502,["A"]=1},
            {["R"]=1,["G"]=0.956539,["B"]=0.760502,["A"]=1},
            {["R"]=0.9401,["G"]=0.93534,["B"]=0.91035,["A"]=1},
            {["R"]=0.9401,["G"]=0.93534,["B"]=0.91035,["A"]=1},
            {["R"]=0.34,["G"]=0.33881,["B"]=0.33405,["A"]=1},
            {["R"]=0.34,["G"]=0.33881,["B"]=0.33405,["A"]=1},
            {["R"]=0.40103,["G"]=0.476,["B"]=0.34153,["A"]=1},
            {["R"]=0.40103,["G"]=0.476,["B"]=0.34153,["A"]=1},
            {["R"]=1,["G"]=0.665313,["B"]=0.4925,["A"]=1},
            {["R"]=1,["G"]=0.665313,["B"]=0.4925,["A"]=1},
            {["R"]=1,["G"]=0.786719,["B"]=0.4925,["A"]=1},
            {["R"]=1,["G"]=0.786719,["B"]=0.4925,["A"]=1},
            {["R"]=0.6919,["G"]=0.59313,["B"]=0.45628,["A"]=1},
            {["R"]=0.6919,["G"]=0.59313,["B"]=0.45628,["A"]=1},
            {["R"]=0.40103,["G"]=0.476,["B"]=0.34153,["A"]=1},
            {["R"]=0.40103,["G"]=0.476,["B"]=0.34153,["A"]=1},
            {["R"]=1,["G"]=0.665313,["B"]=0.4925,["A"]=1},
            {["R"]=1,["G"]=0.665313,["B"]=0.4925,["A"]=1},
            {["R"]=1,["G"]=0.786719,["B"]=0.4925,["A"]=1},
            {["R"]=1,["G"]=0.786719,["B"]=0.4925,["A"]=1},
            {["R"]=0.6919,["G"]=0.59313,["B"]=0.45628,["A"]=1},
            {["R"]=0.6919,["G"]=0.59313,["B"]=0.45628,["A"]=1},
            {["R"]=0.918,["G"]=0.65501,["B"]=0.65501,["A"]=1},
            {["R"]=0.918,["G"]=0.65501,["B"]=0.65501,["A"]=1},
            {["R"]=0.77044,["G"]=0.9061,["B"]=0.90372,["A"]=1},
            {["R"]=0.77044,["G"]=0.9061,["B"]=0.90372,["A"]=1},
            {["R"]=0.81566,["G"]=0.77639,["B"]=0.9061,["A"]=1},
            {["R"]=0.81566,["G"]=0.77639,["B"]=0.9061,["A"]=1},
            {["R"]=1,["G"]=0.970711,["B"]=0.524547,["A"]=1},
            {["R"]=1,["G"]=0.970711,["B"]=0.524547,["A"]=1},
            {["R"]=0.918,["G"]=0.65501,["B"]=0.65501,["A"]=1},
            {["R"]=0.918,["G"]=0.65501,["B"]=0.65501,["A"]=1},
            {["R"]=0.77044,["G"]=0.9061,["B"]=0.90372,["A"]=1},
            {["R"]=0.77044,["G"]=0.9061,["B"]=0.90372,["A"]=1},
            {["R"]=0.81566,["G"]=0.77639,["B"]=0.9061,["A"]=1},
            {["R"]=0.81566,["G"]=0.77639,["B"]=0.9061,["A"]=1},
            {["R"]=1,["G"]=0.970711,["B"]=0.524547,["A"]=1},
            {["R"]=1,["G"]=0.970711,["B"]=0.524547,["A"]=1},
        }
    },
    {
        ["PALETTE"] = "RockLight",
        ["NUMCOLOURS"] = "All",
        ["COLOURS"] =
        {
            {["R"]=0.533,["G"]=0.533,["B"]=0.485,["A"]=1},
            {["R"]=0.533,["G"]=0.533,["B"]=0.485,["A"]=1},
            {["R"]=0.533,["G"]=0.533,["B"]=0.485,["A"]=1},
            {["R"]=0.533,["G"]=0.533,["B"]=0.485,["A"]=1},
            {["R"]=0.533,["G"]=0.533,["B"]=0.485,["A"]=1},
            {["R"]=0.533,["G"]=0.533,["B"]=0.485,["A"]=1},
            {["R"]=0.533,["G"]=0.533,["B"]=0.485,["A"]=1},
            {["R"]=0.533,["G"]=0.533,["B"]=0.485,["A"]=1},
            {["R"]=0.325,["G"]=0.255,["B"]=0.2,["A"]=1},
            {["R"]=0.38,["G"]=0.315,["B"]=0.273,["A"]=1},
            {["R"]=0.317,["G"]=0.26,["B"]=0.258,["A"]=1},
            {["R"]=0.303,["G"]=0.324,["B"]=0.327,["A"]=1},
            {["R"]=0.423,["G"]=0.365,["B"]=0.322,["A"]=1},
            {["R"]=0.347,["G"]=0.31,["B"]=0.304,["A"]=1},
            {["R"]=0.384,["G"]=0.29,["B"]=0.267,["A"]=1},
            {["R"]=0.35,["G"]=0.25,["B"]=0.149,["A"]=1},
            {["R"]=0.325,["G"]=0.255,["B"]=0.2,["A"]=1},
            {["R"]=0.38,["G"]=0.315,["B"]=0.273,["A"]=1},
            {["R"]=0.317,["G"]=0.26,["B"]=0.258,["A"]=1},
            {["R"]=0.303,["G"]=0.324,["B"]=0.327,["A"]=1},
            {["R"]=0.423,["G"]=0.365,["B"]=0.322,["A"]=1},
            {["R"]=0.347,["G"]=0.31,["B"]=0.304,["A"]=1},
            {["R"]=0.383,["G"]=0.288,["B"]=0.267,["A"]=1},
            {["R"]=0.35,["G"]=0.25,["B"]=0.149,["A"]=1},
            {["R"]=0.325,["G"]=0.255,["B"]=0.2,["A"]=1},
            {["R"]=0.38,["G"]=0.315,["B"]=0.273,["A"]=1},
            {["R"]=0.317,["G"]=0.26,["B"]=0.258,["A"]=1},
            {["R"]=0.303,["G"]=0.324,["B"]=0.327,["A"]=1},
            {["R"]=0.423,["G"]=0.365,["B"]=0.322,["A"]=1},
            {["R"]=0.347,["G"]=0.31,["B"]=0.304,["A"]=1},
            {["R"]=0.383,["G"]=0.288,["B"]=0.267,["A"]=1},
            {["R"]=0.35,["G"]=0.25,["B"]=0.149,["A"]=1},
            {["R"]=0.325,["G"]=0.255,["B"]=0.2,["A"]=1},
            {["R"]=0.38,["G"]=0.315,["B"]=0.273,["A"]=1},
            {["R"]=0.317,["G"]=0.26,["B"]=0.258,["A"]=1},
            {["R"]=0.303,["G"]=0.324,["B"]=0.327,["A"]=1},
            {["R"]=0.423,["G"]=0.365,["B"]=0.322,["A"]=1},
            {["R"]=0.347,["G"]=0.31,["B"]=0.304,["A"]=1},
            {["R"]=0.383,["G"]=0.288,["B"]=0.267,["A"]=1},
            {["R"]=0.35,["G"]=0.25,["B"]=0.149,["A"]=1},
            {["R"]=0.325,["G"]=0.255,["B"]=0.2,["A"]=1},
            {["R"]=0.38,["G"]=0.315,["B"]=0.273,["A"]=1},
            {["R"]=0.317,["G"]=0.26,["B"]=0.258,["A"]=1},
            {["R"]=0.303,["G"]=0.324,["B"]=0.327,["A"]=1},
            {["R"]=0.423,["G"]=0.365,["B"]=0.322,["A"]=1},
            {["R"]=0.347,["G"]=0.31,["B"]=0.304,["A"]=1},
            {["R"]=0.383,["G"]=0.288,["B"]=0.267,["A"]=1},
            {["R"]=0.35,["G"]=0.25,["B"]=0.149,["A"]=1},
            {["R"]=0.282,["G"]=0.224,["B"]=0.224,["A"]=1},
            {["R"]=0.231,["G"]=0.282,["B"]=0.224,["A"]=1},
            {["R"]=0.227,["G"]=0.224,["B"]=0.282,["A"]=1},
            {["R"]=0.424,["G"]=0.322,["B"]=0.353,["A"]=1},
            {["R"]=0.267,["G"]=0.337,["B"]=0.384,["A"]=1},
            {["R"]=0.498,["G"]=0.357,["B"]=0.282,["A"]=1},
            {["R"]=0.384,["G"]=0.333,["B"]=0.267,["A"]=1},
            {["R"]=0.451,["G"]=0.345,["B"]=0.157,["A"]=1},
            {["R"]=0.306,["G"]=0.224,["B"]=0.235,["A"]=1},
            {["R"]=0.318,["G"]=0.38,["B"]=0.361,["A"]=1},
            {["R"]=0.31,["G"]=0.384,["B"]=0.298,["A"]=1},
            {["R"]=0.498,["G"]=0.369,["B"]=0.325,["A"]=1},
            {["R"]=0.251,["G"]=0.263,["B"]=0.278,["A"]=1},
            {["R"]=0.498,["G"]=0.416,["B"]=0.325,["A"]=1},
            {["R"]=0.459,["G"]=0.42,["B"]=0.322,["A"]=1},
            {["R"]=0.42,["G"]=0.4,["B"]=0.384,["A"]=1},
        }
    }
}

NMS_MOD_DEFINITION_CONTAINER =
{
["MOD_FILENAME"]  = "MOD_DUD_BarrenColors_v558-A",
["MOD_AUTHOR"]    = "jasondude7116",
["LUA_AUTHOR"]    = "Babscoole",
["NMS_VERSION"]   = "5.58",
["MODIFICATIONS"] =
    {
        {
            ["MBIN_CHANGE_TABLE"] =
            {
                {
                    ["MBIN_FILE_SOURCE"] = "METADATA\SIMULATION\SOLARSYSTEM\BIOMES\BARREN\BARRENCOLOURPALETTES.MBIN",
                    ["MXML_CHANGE_TABLE"] =
                    {
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Sand", "GcPaletteData"},
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"NumColours", "Inactive"}
                            }
                        },
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Wood", "GcPaletteData"},
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"NumColours", "_16"}
                            }
                        },
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Leaf", "GcPaletteData"},
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"NumColours", "All"}
                            }
                        },
                    }
                }
            }
        }
    }
}

function GetColours(R,G,B,A)
    return
    [[
        <Property name="Colours">
          <Property name="R" value="]].. string.format("%0.6f",R) ..[[" />
          <Property name="G" value="]].. string.format("%0.6f",G) ..[[" />
          <Property name="B" value="]].. string.format("%0.6f",B) ..[[" />
          <Property name="A" value="]].. string.format("%0.6f",A) ..[[" />
        </Property>
    ]]
end

function CreateColoursProperty(PaletteColours)
    local PropertiesString = {}

    for j = 1, #PaletteColours do
        local R = PaletteColours[j]["R"]
        local G = PaletteColours[j]["G"]
        local B = PaletteColours[j]["B"]
        local A = PaletteColours[j]["A"]
        table.insert(PropertiesString,GetColours(R, G, B, A))
    end
    local PropertyColoursString =
    [[      <Property name="Colours">
    ]]..table.concat(PropertiesString)..[[
  </Property>]]

    -- print(PropertyColoursString)
    return PropertyColoursString
end

local BaseColourPalettesTable = NMS_MOD_DEFINITION_CONTAINER["MODIFICATIONS"][1]["MBIN_CHANGE_TABLE"][1]["MXML_CHANGE_TABLE"]
for i = 1, #DataTable do
    local Palette = DataTable[i]["PALETTE"]
    local PaletteColours = DataTable[i]["COLOURS"]
    local PaletteNumColours = DataTable[i]["NUMCOLOURS"]

    BaseColourPalettesTable[#BaseColourPalettesTable +1] =
    {
        ["SPECIAL_KEY_WORDS"] = {Palette, "GcPaletteData", "NumColours", PaletteNumColours},
        ["PRECEDING_KEY_WORDS"] = {"Colours"},
        ["REMOVE"] = "SECTION"
    }

    BaseColourPalettesTable[#BaseColourPalettesTable +1] =
    {
        ["SPECIAL_KEY_WORDS"] = {Palette, "GcPaletteData", "NumColours", PaletteNumColours},
        ["ADD"] = CreateColoursProperty(PaletteColours)
    }
    
    BaseColourPalettesTable[#BaseColourPalettesTable +1] =
    {
        ["SPECIAL_KEY_WORDS"] = {Palette, "GcPaletteData"},
        ["PRECEDING_KEY_WORDS"] = {"Colours"},
        ["EXML_FLAGS"]  = "OVERWRITE",
    }
end