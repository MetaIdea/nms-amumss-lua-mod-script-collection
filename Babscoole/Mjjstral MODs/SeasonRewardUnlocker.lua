REWARDS_1 = {"R_RANDOM_TRAIL","RS_S1_COMPLETE","RS_S1_PHASE1","RS_S1_PHASE2","RS_S1_PHASE3","RS_S1_PHASE4","RS_S1_PHASE5","RS_S1_PARTY","RS_S1_FIREWORKS","RS_BASE_TOKENS","RS_FRIG_TOKENS","RS_WEAP_TOKENS","RS_SHIP_TOKENS","RS_FREI_TOKENS","RS_ABAND_FINDER","RS_WARP2_PLANS","RS_LAUNCHER","RS_VISOR_TECH","RS_WARP_TECH","RS_GLYPHS","RS_VOIDEGG",}
REWARDS_2 = {"RS_S2_COMPLETE","RS_S2_PHASE1","RS_S2_PHASE2","RS_S2_PHASE3","RS_S2_PHASE4","RS_S2_PHASE5","RS_S2_PARTY","RS_S2_S5M0",}
REWARDS_3 = {"RS_S3_COMPLETE","RS_S3_PHASE1","RS_S3_PHASE2","RS_S3_PHASE3","RS_S3_PHASE4","RS_S3_PHASE5","RS_S3_PARTY","BLD_PLANET_HOLO","BLD_FLYJAR","BASE_CAVE1","BASE_CAVE2","BASE_CAVE3","BASE_CAVE4","BASE_CAVE5","EXPD_FIREWORK03","EXPD_BANNER03","EXPD_DECAL03","EXPD_TITLE03","EXPD_EGG_03","JETS_BUBBLE",}
REWARDS_4 = {"EXPD_EGG_04","EXPD_TITLE04","EXPD_DECAL04","EXPD_BANNER04","EXPD_WORMHAT","BLD_SKULL","JETS_WORM","EXPD_FIREPACK04","RS_S4_FIREWORKS","RS_S4_COMPLETE","RS_S4_EGG","RS_S4_PHASE1","RS_S4_PHASE2","RS_S4_PHASE3","RS_S4_PHASE4","RS_S4_PHASE5","RS_S4_PARTY",}
REWARDS_5 = {"EXPD_EGG_05","EXPD_BANNER05","EXPD_DECAL05","EXPD_TITLE05","EXPD_BACKPACK05","EXPD_PETCUST05","EXPD_POSTER05C","EXPD_POSTER05B","EXPD_POSTER05A","JETS_SENT","RS_S5_COMPLETE","RS_S5_EGG","RS_S5_PHASE1","RS_S5_PHASE2","RS_S5_PHASE3","RS_S5_PHASE4","RS_S5_PHASE5","RS_S5_PARTY"}
REWARDS_6 = {"EXPD_FLAG_06A","EXPD_FLAG_06B","EXPD_FLAG_06C","EXPD_FLAG_06D","EXPD_FLAG_06E","EXPD_CUBE_06","EXPD_TITLE06","EXPD_DECAL6","EXPD_CAPE06","EXPD_BANNER06","DECAL_WORM_P1","DECAL_WORM_P2","DECAL_WORM_P3","DECAL_WORM_P4","DECAL_WORM_P5","S_POSTER20","S_POSTER21","S_POSTER22","EXPD_POSTER06A","EXPD_POSTER06B","EXPD_POSTER06C","RS_S6_TRAIL","RS_S6_COMPLETE","RS_S6_PHASE1","RS_S6_PHASE2","RS_S6_PHASE3","RS_S6_PHASE4","RS_S6_PHASE5","RS_S6_PARTY1","RS_S6_PARTY2","RS_S6_PARTY3","RS_S6_PARTY4","RS_S6_PARTY5"}
REWARDS_7 = {"EXPD_POSTER07A","EXPD_POSTER07B","EXPD_POSTER07C","SHIP_ROGUE","EXPD_CAPE07","BLD_MINI_BIOFRI","EXPD_TITLE07","EXPD_DECAL07","EXPD_BANNER07","EXPD_BIOFRIG","RS_S7_FRIGATE","RS_S7_TRAIL","RS_S7_COMPLETE","RS_S7_PHASE1","RS_S7_PHASE2","RS_S7_PHASE3","RS_S7_PHASE4","RS_S7_PHASE5","RS_S7_S1PARTY","RS_S7_S2PARTY","RS_S7_S3PARTY","RS_S7_S4PARTY","RS_S7_S5PARTY","RS_S7_S1COMM","RS_S7_S2COMM","RS_S7_S3COMM","RS_S7_S4COMM","RS_S7_S5COMM"}
REWARDS_8 = {"EXPD_EGG_08","EXPD_BANNER08","EXPD_DECAL08","EXPD_TITLE08","EXPD_CAPE08","EXPD_POSTER08C","EXPD_POSTER08B","EXPD_POSTER08A","RS_S8_COMPLETE","RS_S8_EGG","RS_S8_PHASE1","RS_S8_PHASE2","RS_S8_PHASE3","RS_S8_PHASE4","RS_S8_PHASE5","RS_S8_PARTY","RS_S8_PARTY1","RS_S8_PARTY2","RS_S8_PARTY3"}
REWARDS_9 = {"EXPD_BANNER09","EXPD_DECAL09","EXPD_TITLE09","EXPD_EGG_09","SPEC_BUCKETHELM","BLD_HOLOGEK","EXPD_POSTER09C","EXPD_POSTER09B","EXPD_POSTER09A","RS_S9_COMPLETE","RS_S9_EGG","RS_S9_PHASE1","RS_S9_PHASE2","RS_S9_PHASE3","RS_S9_PHASE4","RS_S9_PHASE5","RS_S9_PARTY1","RS_S9_PARTY2","RS_S9_PARTY3","RS_S9_PARTY4","RS_S9_PARTY5"}
REWARDS_10 = {"S10_PART1A","S10_PART1B","S10_PART2","S10_PART3","S10_PART4","S10_PART5","EXPD_BANNER10","EXPD_DECAL10","EXPD_TITLE10","SPEC_ROCKETHAT","BLD_CRYS_SENT0","BLD_CRYS_SENT1","BLD_CRYS_DRONE","JETS_CORRUPT","FREI_TRAIL_RED","EXPD_POSTER10C","EXPD_POSTER10B","EXPD_POSTER10A","RS_S10_COMPLETE","RS_S10_PHASE1","RS_S10_PHASE2","RS_S10_PHASE3","RS_S10_PHASE4","RS_S10_PHASE5","RS_S10_PARTY","RS_S10_S5M6","RS_S10_S5M7"}
REWARDS_11 = {"RS_S11_EGG","RS_S11_COMPLETE","RS_S11_PHASE1","RS_S11_PHASE2","RS_S11_PHASE3","RS_S11_PHASE4","RS_S11_PHASE5","RS_S11_PARTY","EXPD_EGG_11","EXPD_BANNER11","EXPD_TITLE11","EXPD_DECAL11","BLD_BUI_HEAD","BLD_BUI_HAND","BLD_BUI_TENT","EXPD_PETCUST11","EXPD_POSTER11C","EXPD_POSTER11B","EXPD_POSTER11A","JETS_ELECTRIC"}
REWARDS_12 = {"RS_S12_PHASE1","RS_S12_PHASE2","RS_S12_PHASE3","RS_S12_PHASE4","RS_S12_PHASE5","RS_S12_PARTY1","RS_S12_PARTY2","RS_S12_PARTY3","RS_S12_S1M1","RS_S12_S1M2","RS_S12_S1M3","RS_S12_S1M4","RS_S12_S1M5","RS_S12_S1M6","RS_S12_S1M7","RS_S12_S2M1","RS_S12_S2M2","RS_S12_S2M3","RS_S12_S2M4","RS_S12_S2M5","RS_S12_S2M6","RS_S12_S2M7","RS_S12_S3M1","RS_S12_S3M2","RS_S12_S3M3","RS_S12_S3M4","RS_S12_S3M5","RS_S12_S3M6","RS_S12_S3M7","RS_S12_S4M1","RS_S12_S4M2","RS_S12_S4M3","RS_S12_S4M4","RS_S12_S4M5","RS_S12_S4M6","RS_S12_S4M7","RS_S12_S5M1","RS_S12_S5M2","RS_S12_S5M3","RS_S12_S5M4","RS_S12_S5M5","RS_S12_S5M6","RS_S12_S5M7"}
REWARDS_WRACER = {"RS_S12_COMPLETE"}
REWARDS_ATLASSTAFF = {"RS_S12_STAFF"}
REWARDS_GVECTOR = {"RS_S1_SHIP"}
REWARDS_NORMANDY = {"RS_S2_SPEC"}
REWARDS_VRSPEEDER = {"RS_S9_SHIP"}

SEASON_TABLE =
{--  TITLE             ICON                                                                      ANIM   REWARD
    {"Season 1",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.1.DDS",           "S1",  REWARDS_1},
    {"Season 2",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.2.DDS",           "S2",  REWARDS_2},
    {"Season 3",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.3.DDS",           "S3",  REWARDS_3},
    {"Season 4",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.4.DDS",           "S4",  REWARDS_4},
    {"Season 5",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.5.DDS",           "S5",  REWARDS_5},
    {"Season 6",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.6.DDS",           "S6",  REWARDS_6},
    {"Season 7",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.7.DDS",           "S7",  REWARDS_7},
    {"Season 8",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.8.DDS",           "S8",  REWARDS_8},
    {"Season 9",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.9.DDS",           "S9",  REWARDS_9},
    {"Season 10",      "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.10.DDS",          "S10", REWARDS_10},
    {"Season 11",      "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.11.DDS",          "S11", REWARDS_11},
    {"Season 12",      "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.12.DDS",          "S12", REWARDS_12},
    {"Starborn Racer", "TEXTURES/UI/FRONTEND/ICONS/SPECIALSHOP/SPECIAL1.EXPEDITION.SHIP12.DDS",  "WR",  REWARDS_WRACER},
    {"Atlas MT",       "TEXTURES/UI/FRONTEND/ICONS/SPECIALSHOP/HERO1.EXPEDITION.ATLASSTAFF.DDS", "AMT", REWARDS_ATLASSTAFF},
    {"Golden Vector",  "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.1.DDS",           "GV",  REWARDS_GVECTOR},
    {"Normandy",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.2A.DDS",          "Nor", REWARDS_NORMANDY},
    {"Utopia Speeder", "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.9.DDS",           "VR",  REWARDS_VRSPEEDER},
}

NMS_MOD_DEFINITION_CONTAINER =
{
["MOD_FILENAME"]    = "zzz-SeasonRewardUnlocker.pak",
["MOD_AUTHOR"]      = "Mjjstral and Babscoole",
["MOD_DESCRIPTION"] = "Instant access to season rewards with the quick action emote/gesture menu",
["NMS_VERSION"]     = "4.52",
["MODIFICATIONS"]   =
    {
        {
            ["MBIN_CHANGE_TABLE"] =
            {
                {
                    ["MBIN_FILE_SOURCE"] = "MODELS\SPACE\POI\WEIRDOBJECT3\ENTITIES\WEIRDOBJ3.ENTITY.MBIN",
                    ["MBIN_FS_DISCARD"] = "TRUE",
                    ["EXML_CHANGE_TABLE"] =
                    {
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Reward", "DE_SPACE_POI_3"},
                            ["SEC_SAVE_TO"] = "ADD_REWARDACTION",
                        },
                    }
                },
                {
                    ["MBIN_FILE_SOURCE"] = "MODELS\COMMON\ROBOTS\SPIDER_QUADRUPED\ENTITIES\SPIDERQUAD.ENTITY.MBIN",
                    ["MBIN_FS_DISCARD"] = "TRUE",
                    ["EXML_CHANGE_TABLE"] =
                    {
                        {
                            ["PRECEDING_KEY_WORDS"] = {"GcTriggerActionComponentData.xml"},
                            ["SEC_SAVE_TO"] = "ADD_TRIGGER",
                        },
                        {
                            ["SEC_EDIT"] = "ADD_TRIGGER",
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"StateID",    "BOOT"},
                                {"FrameStart", "0"},
                            }
                        },
                        {
                            ["SEC_EDIT"] = "ADD_TRIGGER",
                            ["PRECEDING_KEY_WORDS"] = {"GcCameraShakeAction.xml"},
                            ["REMOVE"] = "SECTION"
                        },
                        {
                            ["SEC_EDIT"] = "ADD_TRIGGER",
                            ["PRECEDING_KEY_WORDS"] = {"GcActionTrigger.xml"},
                            ["SEC_KEEP"] = "TRUE",  --DO NOT REMOVE
                            ["SEC_SAVE_TO"] = "ADD_ACTIONTRIGGER",
                        },
                        {
                            ["SEC_EDIT"] = "ADD_TRIGGER",
                            ["PRECEDING_KEY_WORDS"] = {"GcActionTrigger.xml"},
                            ["REMOVE"] = "SECTION"
                        },
                    }
                },
                {
                    ["MBIN_FILE_SOURCE"] = "MODELS\COMMON\PLAYER\PLAYERCHARACTER\PLAYERCHARACTER\ENTITIES\PLAYERCHARACTER.ENTITY.MBIN",
                    ["EXML_CHANGE_TABLE"] =
                    {
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Anim", "0H_TURN_L"},
                            ["SEC_SAVE_TO"] = "ADD_ANIM",
                        },
                    }
                },
                {
                    ["MBIN_FILE_SOURCE"] = "METADATA\UI\EMOTEMENU.MBIN",
                    ["EXML_CHANGE_TABLE"] =
                    {
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Title", "EMOTE_WAVE"},
                            ["SEC_SAVE_TO"] = "ADD_EMOTE",
                        },
                    }
                },
                {
                    ["MBIN_FILE_SOURCE"] = "METADATA\REALITY\TABLES\REWARDTABLE.MBIN",
                    ["EXML_CHANGE_TABLE"] =
                    {
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Id", "RS_S1_PHASE2"},
                            ["PRECEDING_KEY_WORDS"] = {"GcRewardTableItem.xml", "GcRewardTableItem.xml", "GcRewardTableItem.xml"},
                            ["REMOVE"] = "SECTION",
                        },
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Id", "RS_S7_COMPLETE"},
                            ["PRECEDING_KEY_WORDS"] = {"GcRewardTableItem.xml"},
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"MarkAsClaimedInShop", "False"},
                            }
                        },
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Id", "RS_S12_PHASE3"},
                            ["PRECEDING_KEY_WORDS"] = {"GcRewardTableItem.xml"},
                            ["REMOVE"] = "SECTION",
                        },
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Id", "RS_S12_PHASE3"},
                            ["PRECEDING_KEY_WORDS"] = {"GcRewardTableItem.xml"},
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"MarkAsClaimedInShop", "False"},
                            }
                        },
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Id", "RS_S12_COMPLETE"},
                            ["PRECEDING_KEY_WORDS"] = {"GcRewardTableItem.xml"},
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"MarkAsClaimedInShop", "False"},
                            }
                        },
                    }
                },
                {
                    ["MBIN_FILE_SOURCE"] = "MODELS\TESTS\EFFECTTEST.ANIM.MBIN",
                    ["EXML_CHANGE_TABLE"] =
                    {
                        {
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"FrameCount", "10"},
                                {"NodeCount",  "0"},
                            }
                        },
                    }
                },
            }
        }
    }
}
local AnimTable    = NMS_MOD_DEFINITION_CONTAINER["MODIFICATIONS"][1]["MBIN_CHANGE_TABLE"][3]["EXML_CHANGE_TABLE"]
local TriggerTable = AnimTable -- to show they point to the same table
local EmoteTable   = NMS_MOD_DEFINITION_CONTAINER["MODIFICATIONS"][1]["MBIN_CHANGE_TABLE"][4]["EXML_CHANGE_TABLE"]

for i=#SEASON_TABLE, 1, -1 do
  local TITLE = "Unlock "..SEASON_TABLE[i][1].." Reward"
  local ANIM  = "Unlock"..SEASON_TABLE[i][3].."Reward"
  local ICON  = SEASON_TABLE[i][2]

  EmoteTable[#EmoteTable+1] =
    {
        ["SEC_EDIT"] = "ADD_EMOTE",
        ["VALUE_CHANGE_TABLE"] =
        {
            {"Title",               TITLE},
            {"ChatText",            ""},
            {"ChatUsesPrefix",      "False"},
            {"EmoteID",             ANIM},
            {"AnimationName",       ANIM},
            {"Filename",            ICON},
            {"MoveToCancel",        "True"},
            {"RidingAnimationName", ANIM},
        }
    }
  EmoteTable[#EmoteTable+1] =
    {
        ["PRECEDING_KEY_WORDS"] = {"Emotes"},
        ["ADD_OPTION"] = "ADDafterLINE",
        ["SEC_ADD_NAMED"] = "ADD_EMOTE",
    }

  AnimTable[#AnimTable+1] =
    {
        ["SEC_EDIT"] = "ADD_ANIM",
        ["VALUE_CHANGE_TABLE"] =
        {
            {"Anim",     ANIM},
            {"Filename", "MODELS/TESTS/EFFECTTEST.ANIM.MBIN"},
        }
    }
  AnimTable[#AnimTable+1] =
    {
        ["SPECIAL_KEY_WORDS"] = {"Anim", "0H_GREET_MOB_04"},
        ["SECTION_ACTIVE"] = {2},
        ["ADD_OPTION"] = "ADDafterSECTION",
        ["SEC_ADD_NAMED"] = "ADD_ANIM",
    }
  TriggerTable[#TriggerTable+1] =
    {
        ["SEC_EDIT"] = {"ADD_ACTIONTRIGGER"},
        ["VALUE_CHANGE_TABLE"] =
        {
            {"Anim", ANIM},
        }
    }

  for j=#SEASON_TABLE[i][4], 1, -1 do
    local REWARD = SEASON_TABLE[i][4][j]

    TriggerTable[#TriggerTable+1] =
      {
          ["SEC_EDIT"] = "ADD_REWARDACTION",
          ["VALUE_CHANGE_TABLE"] =
          {
              {"Reward", REWARD},
          }
      }
    TriggerTable[#TriggerTable+1] =
      {
          ["SEC_EDIT"] = "ADD_ACTIONTRIGGER",
          ["PRECEDING_KEY_WORDS"] = {"Action"},
          ["ADD_OPTION"] = "ADDafterLINE",
          ["SEC_ADD_NAMED"] = "ADD_REWARDACTION",
      }
  end
    TriggerTable[#TriggerTable+1] =
      {
          ["SEC_EDIT"] = "ADD_TRIGGER",
          ["PRECEDING_KEY_WORDS"] = {"Triggers"},
          ["ADD_OPTION"] = "ADDafterLINE",
          ["SEC_ADD_NAMED"] = "ADD_ACTIONTRIGGER",
      }
end
  TriggerTable[#TriggerTable+1] =
    {
        ["PRECEDING_KEY_WORDS"] = {"GcPlayerEffectsComponentData.xml"},
        ["ADD_OPTION"] = "ADDafterSECTION",
        ["SEC_ADD_NAMED"] = "ADD_TRIGGER",
    }
