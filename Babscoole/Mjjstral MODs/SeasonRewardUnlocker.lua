REWARDS_1 = {"R_RANDOM_TRAIL","RS_S1_COMPLETE","RS_S1_PHASE1","RS_S1_PHASE2","RS_S1_PHASE3","RS_S1_PHASE4","RS_S1_PHASE5","RS_S1_PARTY","RS_S1_FIREWORKS","RS_BASE_TOKENS","RS_FRIG_TOKENS","RS_WEAP_TOKENS","RS_SHIP_TOKENS","RS_FREI_TOKENS","RS_ABAND_FINDER","RS_WARP2_PLANS","RS_LAUNCHER","RS_VISOR_TECH","RS_WARP_TECH","RS_GLYPHS","RS_VOIDEGG"}
REWARDS_2 = {"RS_S2_COMPLETE","RS_S2_PHASE1","RS_S2_PHASE2","RS_S2_PHASE3","RS_S2_PHASE4","RS_S2_PHASE5","RS_S2_PARTY","RS_S2_S5M0"}
REWARDS_3 = {"RS_S3_COMPLETE","RS_S3_EGG","RS_S3_PHASE1","RS_S3_PHASE2","RS_S3_PHASE3","RS_S3_PHASE4","RS_S3_PHASE5","RS_S3_PARTY","EXPD_FIREWORK03",}
REWARDS_4 = {"RS_S4_FIREWORKS","RS_S4_COMPLETE","RS_S4_EGG","RS_S4_PHASE1","RS_S4_PHASE2","RS_S4_PHASE3","RS_S4_PHASE4","RS_S4_PHASE5","RS_S4_PARTY"}
REWARDS_5 = {"RS_S5_COMPLETE","RS_S5_EGG","RS_S5_PHASE1","RS_S5_PHASE2","RS_S5_PHASE3","RS_S5_PHASE4","RS_S5_PHASE5","RS_S5_PARTY"}
REWARDS_6 = {"RS_S6_TRAIL","RS_S6_COMPLETE","RS_S6_PHASE1","RS_S6_PHASE2","RS_S6_PHASE3","RS_S6_PHASE4","RS_S6_PHASE5","RS_S6_PARTY1","RS_S6_PARTY2","RS_S6_PARTY3","RS_S6_PARTY4","RS_S6_PARTY5"}
REWARDS_7 = {"RS_S7_FRIGATE","RS_S7_TRAIL","RS_S7_COMPLETE","RS_S7_PHASE1","RS_S7_PHASE2","RS_S7_PHASE3","RS_S7_PHASE4","RS_S7_PHASE5","RS_S7_S1PARTY","RS_S7_S2PARTY","RS_S7_S3PARTY","RS_S7_S4PARTY","RS_S7_S5PARTY","RS_S7_S1COMM","RS_S7_S2COMM","RS_S7_S3COMM","RS_S7_S4COMM","RS_S7_S5COMM"}
REWARDS_8 = {"RS_S8_COMPLETE","RS_S8_EGG","RS_S8_PHASE1","RS_S8_PHASE2","RS_S8_PHASE3","RS_S8_PHASE4","RS_S8_PHASE5","RS_S8_PARTY","RS_S8_PARTY1","RS_S8_PARTY2","RS_S8_PARTY3"}
REWARDS_9 = {"RS_S9_COMPLETE","RS_S9_EGG","RS_S9_PHASE1","RS_S9_PHASE2","RS_S9_PHASE3","RS_S9_PHASE4","RS_S9_PHASE5","RS_S9_PARTY1","RS_S9_PARTY2","RS_S9_PARTY3","RS_S9_PARTY4","RS_S9_PARTY5"}
REWARDS_10 = {"RS_S10_COMPLETE","RS_S10_PHASE1","RS_S10_PHASE2","RS_S10_PHASE3","RS_S10_PHASE4","RS_S10_PHASE5","RS_S10_PARTY","RS_S10_S5M6","RS_S10_S5M7"}
REWARDS_11 = {"RS_S11_EGG","RS_S11_COMPLETE","RS_S11_PHASE1","RS_S11_PHASE2","RS_S11_PHASE3","RS_S11_PHASE4","RS_S11_PHASE5","RS_S11_PARTY"}
REWARDS_12 = {"RS_S12_PHASE1","RS_S12_PHASE2","RS_S12_PHASE3","RS_S12_PHASE4","RS_S12_PHASE5","RS_S12_PARTY1","RS_S12_PARTY2","RS_S12_PARTY3","RS_S12_S2M7"}
REWARDS_13 = {"RS_S13_EGG","RS_S13_PHASE1","RS_S13_PHASE2","RS_S13_PHASE3","RS_S13_PHASE4","RS_S13_PHASE5","RS_S13_COMPLETE","RS_S13_PARTY","RS_S13_PARTY2","RS_S13_PARTY3","RS_S13_PARTY4","RS_S13_PARTY5"}
REWARDS_14 = {"RS_S14_EGG","RS_S14_COMPLETE","RS_S14_PHASE1","RS_S14_PHASE2","RS_S14_PHASE3","RS_S14_PHASE4","RS_S14_PHASE5","RS_S14_S5M8"}
REWARDS_15 = {"RS_S15_FSHLASER","RS_S15_COMPLETE","RS_S15_PHASE1","RS_S15_PHASE2","RS_S15_PHASE3","RS_S15_PHASE4","RS_S15_PHASE5","RS_S15_S1M1","RS_S15_S1M2","RS_S15_S1M3","RS_S15_S1M4","RS_S15_S1M5","RS_S15_S1M6","RS_S15_S1M7","RS_S15_S2M1","RS_S15_S2M2","RS_S15_S2M3","RS_S15_S2M4","RS_S15_S2M5","RS_S15_S2M6","RS_S15_S2M7","RS_S15_S2M8","RS_S15_S3M1","RS_S15_S3M2","RS_S15_S3M3","RS_S15_S3M4","RS_S15_S3M5","RS_S15_S3M6","RS_S15_S3M7","RS_S15_S4M1","RS_S15_S4M2","RS_S15_S4M3","RS_S15_S4M5","RS_S15_S4M6","RS_S15_S4M7","RS_S15_S4M8","RS_S15_S5M1","RS_S15_S5M2","RS_S15_S5M3","RS_S15_S5M4","RS_S15_S5M5","RS_S15_S5M6","RS_S15_S5M7"}
REWARDS_WRACER = {"RS_S12_COMPLETE"}
REWARDS_ATLASSTAFF = {"RS_S12_STAFF"}
REWARDS_GVECTOR = {"RS_S1_SHIP"}
REWARDS_NORMANDY = {"RS_S2_SPEC"}
REWARDS_VRSPEEDER = {"RS_S9_SHIP"}
REWARDS_IRONVUL = {"RS_S13_SHIP"}
REWARDS_GHOSTFRIG = {"RS_S13_FRIGATE"}

SEASON_TABLE =
{--  TITLE             ICON                                                                      ANIM   REWARD
    {"Season 1",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.1.DDS",           "S1",  REWARDS_1},
    {"Season 2",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.2.DDS",           "S2",  REWARDS_2},
    {"Season 3",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.3.DDS",           "S3",  REWARDS_3},
    {"Season 4",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.4.DDS",           "S4",  REWARDS_4},
    {"Season 5",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.5.DDS",           "S5",  REWARDS_5},
    {"Season 6",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.6.DDS",           "S6",  REWARDS_6},
    {"Season 7",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.7.DDS",           "S7",  REWARDS_7},
    {"Season 8",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.8.DDS",           "S8",  REWARDS_8},
    {"Season 9",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.9.DDS",           "S9",  REWARDS_9},
    {"Season 10",      "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.10.DDS",          "S10", REWARDS_10},
    {"Season 11",      "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.11.DDS",          "S11", REWARDS_11},
    {"Season 12",      "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.12.DDS",          "S12", REWARDS_12},
    {"Season 13",      "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.13.DDS",          "S13", REWARDS_13},
    {"Season 14",      "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.14.DDS",          "S14", REWARDS_14},
    {"Season 15",      "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.15.DDS",          "S15", REWARDS_15},
    {"Starborn Racer", "TEXTURES/UI/FRONTEND/ICONS/SPECIALSHOP/SPECIAL1.EXPEDITION.SHIP12.DDS",  "WR",  REWARDS_WRACER},
    {"Atlas MT",       "TEXTURES/UI/FRONTEND/ICONS/SPECIALSHOP/HERO1.EXPEDITION.ATLASSTAFF.DDS", "AMT", REWARDS_ATLASSTAFF},
    {"Golden Vector",  "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.1.DDS",           "GV",  REWARDS_GVECTOR},
    {"Normandy",       "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.2A.DDS",          "Nor", REWARDS_NORMANDY},
    {"Utopia Speeder", "TEXTURES/UI/FRONTEND/ICONS/EXPEDITION/PATCH.EXPEDITION.9.DDS",           "VR",  REWARDS_VRSPEEDER},
    {"Iron Vulture",   "TEXTURES/UI/FRONTEND/ICONS/SPECIALSHOP/HERO1.EXPEDITION.SHIP13.DDS",     "IV",  REWARDS_IRONVUL},
    {"Ghost Frigate",  "TEXTURES/UI/FRONTEND/ICONS/SPECIALSHOP/HERO1.EXPEDITION.GHOSTFRIG.DDS",  "GF",  REWARDS_GHOSTFRIG},
}

NMS_MOD_DEFINITION_CONTAINER =
{
["MOD_FILENAME"]    = "zzz-SeasonRewardUnlocker.pak",
["MOD_AUTHOR"]      = "Mjjstral and Babscoole",
["MOD_DESCRIPTION"] = "Instant access to season rewards with the quick action emote/gesture menu",
["NMS_VERSION"]     = "5.22",
["MODIFICATIONS"]   =
    {
        {
            ["MBIN_CHANGE_TABLE"] =
            {
                {
                    ["MBIN_FILE_SOURCE"] = "MODELS\SPACE\POI\WEIRDOBJECT3\ENTITIES\WEIRDOBJ3.ENTITY.MBIN",
                    ["MBIN_FS_DISCARD"] = "TRUE",
                    ["EXML_CHANGE_TABLE"] =
                    {
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Reward", "DE_SPACE_POI_3"},
                            ["SEC_SAVE_TO"] = "ADD_REWARDACTION",
                        },
                    }
                },
                {
                    ["MBIN_FILE_SOURCE"] = "MODELS\COMMON\ROBOTS\SPIDER_QUADRUPED\ENTITIES\SPIDERQUAD.ENTITY.MBIN",
                    ["MBIN_FS_DISCARD"] = "TRUE",
                    ["EXML_CHANGE_TABLE"] =
                    {
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Template", "GcTriggerActionComponentData.xml"},
                            ["SECTION_UP"] = 1,
                            ["SEC_SAVE_TO"] = "ADD_TRIGGER",
                        },
                        {
                            ["SEC_EDIT"] = "ADD_TRIGGER",
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"StateID",    "BOOT"},
                                {"FrameStart", "0"},
                            }
                        },
                        {
                            ["SEC_EDIT"] = "ADD_TRIGGER",
                            ["PRECEDING_KEY_WORDS"] = {"GcCameraShakeAction.xml"},
                            ["REMOVE"] = "SECTION"
                        },
                        {
                            ["SEC_EDIT"] = "ADD_TRIGGER",
                            ["PRECEDING_KEY_WORDS"] = {"GcActionTrigger.xml"},
                            ["SEC_KEEP"] = "TRUE",  --DO NOT REMOVE
                            ["SEC_SAVE_TO"] = "ADD_ACTIONTRIGGER",
                        },
                        {
                            ["SEC_EDIT"] = "ADD_TRIGGER",
                            ["PRECEDING_KEY_WORDS"] = {"GcActionTrigger.xml"},
                            ["REMOVE"] = "SECTION"
                        },
                    }
                },
                {
                    ["MBIN_FILE_SOURCE"] = "MODELS\COMMON\PLAYER\PLAYERCHARACTER\PLAYERCHARACTER\ENTITIES\PLAYERCHARACTER.ENTITY.MBIN",
                    ["EXML_CHANGE_TABLE"] =
                    {
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Anim", "0H_TURN_L"},
                            ["SEC_SAVE_TO"] = "ADD_ANIM",
                        },
                    }
                },
                {
                    ["MBIN_FILE_SOURCE"] = "METADATA\UI\EMOTEMENU.MBIN",
                    ["EXML_CHANGE_TABLE"] =
                    {
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Title", "EMOTE_WAVE"},
                            ["SEC_SAVE_TO"] = "ADD_EMOTE",
                        },
                    }
                },
                {
                    ["MBIN_FILE_SOURCE"] = "METADATA\REALITY\TABLES\REWARDTABLE.MBIN",
                    ["EXML_CHANGE_TABLE"] =
                    {
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Id", "RS_S1_PHASE2"},
                            ["PRECEDING_KEY_WORDS"] = {"GcRewardTableItem.xml", "GcRewardTableItem.xml", "GcRewardTableItem.xml"},
                            ["REMOVE"] = "SECTION",
                        },
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Id", "RS_S7_COMPLETE"},
                            ["PRECEDING_KEY_WORDS"] = {"GcRewardTableItem.xml"},
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"MarkAsClaimedInShop", "False"},
                            }
                        },
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Id", "RS_S12_PHASE3"},
                            ["PRECEDING_KEY_WORDS"] = {"GcRewardTableItem.xml"},
                            ["REMOVE"] = "SECTION",
                        },
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Id", "RS_S12_PHASE3"},
                            ["PRECEDING_KEY_WORDS"] = {"GcRewardTableItem.xml"},
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"MarkAsClaimedInShop", "False"},
                            }
                        },
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Id", "RS_S12_COMPLETE"},
                            ["PRECEDING_KEY_WORDS"] = {"GcRewardTableItem.xml"},
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"MarkAsClaimedInShop", "False"},
                            }
                        },
                    }
                },
            }
        }
    },
["ADD_FILES"] =
    {
        {
            ["FILE_DESTINATION"] = "MODELS\TESTS\EFFECTTEST.ANIM.EXML",
            ["FILE_CONTENT"] =
[[
<?xml version="1.0" encoding="utf-8"?>

<Data template="TkAnimMetadata">
  <Property name="NodeData">
    <Property value="TkAnimNodeData.xml">
      <Property name="Node" value="AnimatedTrans" />
      <Property name="RotIndex" value="0" />
      <Property name="TransIndex" value="0" />
      <Property name="ScaleIndex" value="0" />
    </Property>
  </Property>
  <Property name="AnimFrameData">
    <Property value="TkAnimNodeFrameData.xml">
      <Property name="Rotations" />
      <Property name="Translations" />
      <Property name="Scales" />
    </Property>
    <Property value="TkAnimNodeFrameData.xml">
      <Property name="Rotations" />
      <Property name="Translations" />
      <Property name="Scales" />
    </Property>
    <Property value="TkAnimNodeFrameData.xml">
      <Property name="Rotations" />
      <Property name="Translations" />
      <Property name="Scales" />
    </Property>
  </Property>
  <Property name="StillFrameData" value="TkAnimNodeFrameData.xml">
    <Property name="Rotations">
      <Property value="Quaternion.xml">
        <Property name="x" value="0" />
        <Property name="y" value="0" />
        <Property name="z" value="0" />
        <Property name="w" value="1" />
        <Property name="dropComponent" value="3" />
      </Property>
    </Property>
    <Property name="Translations">
      <Property value="Vector4f.xml">
        <Property name="x" value="-0.73121876" />
        <Property name="y" value="0.08333181" />
        <Property name="z" value="-0.02858855" />
        <Property name="t" value="1" />
      </Property>
    </Property>
    <Property name="Scales">
      <Property value="Vector4f.xml">
        <Property name="x" value="1" />
        <Property name="y" value="1" />
        <Property name="z" value="1" />
        <Property name="t" value="1" />
      </Property>
    </Property>
  </Property>
  <Property name="FrameCount" value="10" />
  <Property name="NodeCount" value="0" />
  <Property name="Has30HzFrames" value="False" />
</Data>
]]
        },
    }
}
local AnimTable    = NMS_MOD_DEFINITION_CONTAINER["MODIFICATIONS"][1]["MBIN_CHANGE_TABLE"][3]["EXML_CHANGE_TABLE"]
local TriggerTable = AnimTable -- to show they point to the same table
local EmoteTable   = NMS_MOD_DEFINITION_CONTAINER["MODIFICATIONS"][1]["MBIN_CHANGE_TABLE"][4]["EXML_CHANGE_TABLE"]

for i=#SEASON_TABLE, 1, -1 do
  local TITLE = "Unlock "..SEASON_TABLE[i][1].." Reward"
  local ANIM  = "Unlock"..SEASON_TABLE[i][3].."Reward"
  local ICON  = SEASON_TABLE[i][2]

  EmoteTable[#EmoteTable+1] =
    {
        ["SEC_EDIT"] = "ADD_EMOTE",
        ["VALUE_CHANGE_TABLE"] =
        {
            {"Title",               TITLE},
            {"ChatText",            ""},
            {"ChatUsesPrefix",      "False"},
            {"EmoteID",             ANIM},
            {"AnimationName",       ANIM},
            {"Filename",            ICON},
            {"MoveToCancel",        "True"},
            {"RidingAnimationName", ANIM},
        }
    }
  EmoteTable[#EmoteTable+1] =
    {
        ["PRECEDING_KEY_WORDS"] = {"Emotes"},
        ["ADD_OPTION"] = "ADDafterLINE",
        ["SEC_ADD_NAMED"] = "ADD_EMOTE",
    }

  AnimTable[#AnimTable+1] =
    {
        ["SEC_EDIT"] = "ADD_ANIM",
        ["VALUE_CHANGE_TABLE"] =
        {
            {"Anim",     ANIM},
            {"Filename", "MODELS/TESTS/EFFECTTEST.ANIM.MBIN"},
        }
    }
  AnimTable[#AnimTable+1] =
    {
        ["SPECIAL_KEY_WORDS"] = {"Anim", "0H_GREET_MOB_04"},
        ["SECTION_ACTIVE"] = {2},
        ["ADD_OPTION"] = "ADDafterSECTION",
        ["SEC_ADD_NAMED"] = "ADD_ANIM",
    }
  TriggerTable[#TriggerTable+1] =
    {
        ["SEC_EDIT"] = {"ADD_ACTIONTRIGGER"},
        ["VALUE_CHANGE_TABLE"] =
        {
            {"Anim", ANIM},
        }
    }

  for j=#SEASON_TABLE[i][4], 1, -1 do
    local REWARD = SEASON_TABLE[i][4][j]

    TriggerTable[#TriggerTable+1] =
      {
          ["SEC_EDIT"] = "ADD_REWARDACTION",
          ["VALUE_CHANGE_TABLE"] =
          {
              {"Reward", REWARD},
          }
      }
    TriggerTable[#TriggerTable+1] =
      {
          ["SEC_EDIT"] = "ADD_ACTIONTRIGGER",
          ["PRECEDING_KEY_WORDS"] = {"Action"},
          ["ADD_OPTION"] = "ADDafterLINE",
          ["SEC_ADD_NAMED"] = "ADD_REWARDACTION",
      }
  end
    TriggerTable[#TriggerTable+1] =
      {
          ["SEC_EDIT"] = "ADD_TRIGGER",
          ["PRECEDING_KEY_WORDS"] = {"Triggers"},
          ["ADD_OPTION"] = "ADDafterLINE",
          ["SEC_ADD_NAMED"] = "ADD_ACTIONTRIGGER",
      }
end
  TriggerTable[#TriggerTable+1] =
    {
        ["SPECIAL_KEY_WORDS"] = {"Template", "GcPlayerEffectsComponentData.xml"},
        ["SECTION_UP"] = 1,
        ["ADD_OPTION"] = "ADDafterSECTION",
        ["SEC_ADD_NAMED"] = "ADD_TRIGGER",
    }
